<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
        #body {
            display: flex;
            width: 95%;
            height: auto;
            /* margin: auto; */
            justify-content: space-between;
            font-family: 'Roboto', sans-serif;
        }

        #list {
            width: 370px;
            height: 100%;
            margin-right: 20px;
            justify-content: left;
    position: sticky;
     top: 0;
     z-index: 3;  
        }

        /* #sortPrice {
            width: 100%;
            height: 50px;
            border: 2px solid black;
            font-size: x-large;
            background-color: rgb(247, 127, 153);
            color: aliceblue;
        } */
        .bar{
            width: 100%;
            height: 50px;
            border: 2px solid black;
            font-size: x-large;
            background-color: rgb(247, 127, 153);
            color: aliceblue;
            position: sticky;
           
        }

        #products {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            margin: auto;
            gap: 10px;
            width: 100%;
        }

        #products>div {
            gap: 10px;
            text-align: center;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 10px;

        }

        #products img {
            width: 100%;
        }

        #products button {
            width: 200px;
            height: 50px;
            display: flex;
            margin: auto;
            text-align: center;
            align-items: center;
            color: aliceblue;
            background-color: black;
            gap: 10px;
            margin-bottom: 20px;
            border-radius: 40px;
            justify-content: center;
        }

        #products button:hover {
            background-color: rgb(255, 134, 134);
            transform: scale(1.2);
        }
    </style>
</head>

<body>
    <div id="body">
        <div id="list">
            <select id="sortPrice" class="bar">
                <option value=""> Price</option>
                <option value="asc">Ascending</option>
                <option value="desc">Descending</option>
            </select>
            <select id="Rating" class="bar">
                <option value=""> Rating</option>
                <option value="low">1-5</option>
                <option value="high">6-10</option>
            </select>
            <select id="dresses" class="bar">
                <option value=""> dresses</option>
                <option value="male">male</option>
                <option value="female">female</option>
            </select>
            <select id="Cosmetic" class="bar">
                <option value=""> Cosmetic</option>
                <option value="Cosmetics">Cosmetics</option>
                <option value="Mini">Mini</option>
            </select>
            <select id="dates" class="bar">
                <option value="">Release dates</option>
                <option value="New">New Arival</option>
                <option value="year">2023</option>
                <option value="year">2022</option>
                <option value="year">2021-2000</option>
            </select>
            <select id="Brand" class="bar">
                <option value=""> Brands</option>
                <option value="LV">louis vuitton</option>
                <option value="gucci">Gucci</option>
                <option value="balenciaga">Balenciaga</option>
            </select>
            <select id="Cosmetic" class="bar">
                <option value=""> Cosmetic</option>
                <option value="Cosmetics">Cosmetics</option>
                <option value="Mini">Mini</option>
            </select>
        </div>
        <div id="products">

        </div>
    </div>
</body>
<script>
    let arr;
    let url = `https://639b3492d5141501974eaf28.mockapi.io/nykaa`
    fetch(url).then((res) => {
        return res.json();
    }).then((data) => {
        hotDisplay(data);
        //console.log(data);
        arr = data;
    }).catch((err) => {
        alert(err)
    })
    function hotDisplay(data) {
        document.querySelector("#products").innerHTML = null;
        data.forEach(element => {
            let div = document.createElement("div");
            let img = document.createElement("img");
            img.setAttribute("src", element.image);
            let name = document.createElement("h2")
            name.innerText = element.name;
            let price = document.createElement("h3")
            price.innerText = "â‚¹" + element.price;

            let rating = document.createElement("h3")
            rating.innerText = "Rating:- "+ element.ratings;

            let details = document.createElement("h6")

            // change is here
            details.innerText = element.details.substring(0,75);
            // let bus= src="https://online.kfc.co.in/static/media/Icon_Add_to_Cart.58b87a9b.svg"

            details.innerText = element.details;


            let addToCard = document.createElement("button")
            addToCard.innerHTML = "Add To Card";
            addToCard.addEventListener("click", () => {
                // change the key is here
                let cardData = JSON.parse(localStorage.getItem("webUserData"))
                let num=cardData[0].userNumberID;
                if (cardData === null) cardData = []
                //for singel products
                let isAllReadyCard = false
                for (let i = 0; i < cardData[num].userCartData.length; i++) {
                    if (cardData[num].userCartData[i].id === element.id) {
                        isAllReadyCard = true;
                        break;
                    }
                }
                if (isAllReadyCard === true) {
                    alert("Product Already in Cart")
                } else {//change the path of storing cart value
                    cardData[num].userCartData.push({ ...element, quantity: 1 })
                    localStorage.setItem("webUserData", JSON.stringify(cardData))
                    alert("Product Added To Cart")
                    console.log(cardData[num].userCartData)
                }

            })

            div.append(img, name, price,rating, details, addToCard);
            document.querySelector("#products").append(div);
        });
    }


    document.querySelector("#sortPrice").addEventListener("change", () => {
        let value = document.querySelector("#sortPrice").value;
       // console.log(value);
        if (value === "asc") {
            arr.sort((a, b) => {
                return a.price - b.price;
            })
            console.log(arr);
            hotDisplay(arr);
        }
        if (value === "desc") {
            arr.sort((a, b) => {
                return b.price - a.price;
            })
            hotDisplay(arr);
        }
    });


  let cloth=  document.querySelector("#dresses");
  cloth.addEventListener("change",()=>{
    let value =document.querySelector("#dresses").value;

    arr = JSON.parse(localStorage.getItem("card"));
    if(value === "male"){
        arr=arr.filter(element => element.category=="male");
       hotDisplay(arr)
    }
   else if(value === "female"){
        arr=arr.filter(element => element.category=="female");
       hotDisplay(arr)
    }
    else{
        arr = JSON.parse(localStorage.getItem("card"));
       hotDisplay(arr)
    }
})

//cosmetic
let cosmetic=  document.querySelector("#Cosmetic");
  cosmetic.addEventListener("change",()=>{
    let value =document.querySelector("#Cosmetic").value;

    arr = JSON.parse(localStorage.getItem("card"));
    if(value === "Cosmetics"){
        arr=arr.filter(element => element.category=="Cosmetics");
       hotDisplay(arr)
    }
   else if(value === "Mini"){
        arr=arr.filter(element => element.category=="Mini");
       hotDisplay(arr)
    }
    else{
        arr = JSON.parse(localStorage.getItem("card"));
       hotDisplay(arr)
    }
})




//     document.querySelector("#Rating").addEventListener("change",()=>{
//     let value =document.querySelector("#Rating").value;
//     //console.log(value);
//     arr = JSON.parse(localStorage.getItem("card"));
//    if(value === "low"){
//         arr=arr.filter(element =>{
//             if(+(element.rating)<=5){
//                 hotDisplay(arr);
//             }
//         });
      
//     }
//    else if(value === "high"){
//         arr=arr.filter(element => element.rating==="8");
//         hotDisplay(arr);
//     }
//     else{
//        // arr = JSON.parse(localStorage.getItem("registerdData"));
//        hotDisplay(arr);
//     }
// })
</script>

</html>